<div class="row">
  <div class="col-md-12">
    <div class="box box-success">
      <div class="box-header with-border">
        <h3 class="box-title"><%= t('.title') %></h3>
        <div class="box-tools pull-right">
          <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
        </div>
      </div>
      <div class="box-body no-padding">
        <table class="table table-striped">
          <thead>
            <tr>
              <th style="width: 10px">#</th>
              <th><%= t('.labels.player') %></th>
              <th class="hidden-xs"><%= t('.labels.performance') %></th>
              <th class="text-center" style="width: 40px"><%= t('.labels.score') %></th>
            </tr>
          </thead>
          <tbody>
            <% @league.leaderboard.each_with_index do |row, idx| %>
              <tr>
                <td><strong><%= idx + 1 %></strong></td>
                <td><%= row.player_name %></td>
                <td class="hidden-xs">
                  <div class="peity" id="peity-<%= row.player_id %>">
                    <%= row.results.join(',') %>
                  </div>
                </td>
                <td class="text-center"><%= row.total_score %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<span id="peity-tooltip"></span>
<script>
  $(".peity").peity("bar",
    {
    delimiter: ",", height: 16, min: 0, max: 7, width: 16, padding: 0.05,
    fill: function(value) {
      return ['#E50800', '#888888', '#A3A3A3',
      '#0A54FF', '#1E0AFF', '#00298E',
      '#002389', '#001D85'][value]
    }
  });
  $('.peity [data-value]').mousemove(function (e) {
		$('#peity-tooltip').html("<i class='fa fa-circle' style='color: " + $(this).attr('fill') + "'></i> " + $(this).data('value')).css({left: e.pageX + 8, top: e.pageY + 8});
	}).hover(
    function() {
      $('#peity-tooltip').addClass('show');
    }, function() {
      $('#peity-tooltip').removeClass('show');
    }
  );
</script>
